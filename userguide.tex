\documentclass[embeddedlogo]{ufsc-thesis-rn46-2019}

\usepackage[utf8]{inputenc} % UTF-8
\usepackage{lipsum} % Gerador de texto
\usepackage{pdfpages} % Inclui PDF externo (ficha catalográfica)

% Usado para mostrar código
\usepackage{minted}
\newmintinline[mt]{latex}{fontsize=\normalsize}
\setminted{fontsize=\tiny,linenos,xleftmargin=2em}
\setmintedinline{breaklines,breakbytokenanywhere}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Configurações da classe (dados do trabalho)                  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Preâmbulo
\titulo{Template \LaTeX~ seguindo a RN 46/2019/CPG da UFSC}
\autor{Omar Ravenhurst}
% Importante! Para documentos em inglês, não use today, digite a data em
% pt_BR, como deve aparecer na folha de certificação.
\data{1 de Agosto de 2019}
\instituicao{Universidade Federal de Santa Catarina}
\programa{Programa de Pós-Graduação em Ciências da Computação}
\tese % ou \dissertacao
\local{Florianópolis} % Apenas cidade! Sem estado
\titulode{Doutor em Ciência da Computação}
\orientador{Prof. Dr. Ben Trovato}
\coorientador{Prof. Dr. Lars Thørväld}
\centro{Centro Tecnológico -- CTC}

% Membros da banca e coordenador
% As regras da BU agora exigem que Dr. apareça depois do nome
\membrobanca{Prof. Valerie Béranger, Dr.}{Universidade Federal de Santa Catarina}
\membrobanca{Prof. Mordecai Malignatus, Dr.}{Universidade Federal de Santa Catarina}
\membrobanca{Prof. Huifen Chan, Dr.}{Universidade Federal de Santa Catarina}
% Atenção! o template da BU e o documento que apresenta as regras continua
% usando Dr antes do nome para Orientador e Coordenador!
\coordenador{Prof. Dr. Charles Palmer, Dr.}


\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Principais elementos pré-textuais                            %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Inicia parte pré-textual do documento capa, folha de rosto, folha de
% aprovação, aprovação, resumo, lista de tabelas, lista de figuras, etc.
\pretextual%
\imprimircapa%
\imprimirfolhaderosto*
\protect\incluirfichacatalografica{ficha.pdf}
\imprimirfolhadecertificacao
\clearpage \listoffigures* 
\clearpage \tableofcontents*%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Corpo do texto                                               %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\textual%

\chapter{Introdução}

Bem-vindo ao guia de usuário da classe \texttt{ufsc-thesis-rn46-2019}. Essa classe é um conjunto de customizações aplicadas à classe \href{https://ctan.org/pkg/abntex2}{\abnTeX} e ao pacote \texttt{abntex2cite}. O objetivo da classe \texttt{ufsc-thesis-rn46-2019} é simplório: Adequar o \abnTeX às \href{http://portal.bu.ufsc.br/normalizacao/}{normas emitidas pela Biblioteca Universitária da UFSC} em sequência à \href{https://repositorio.ufsc.br/handle/123456789/197121}{Resolução Normativa nº 46/2019/CPG}.


\section{Autores, suporte e atualizações}

Essa classe foi escrita incialmente por dois alunos do \href{http://ppgcc.posgrad.ufsc.br/}{PPGCC da UFSC}: Alexis Huf e Gustavo Zambonin. Há o risco de esse arquivo não ser atualizado a cada \textit{pull request}, então confira a lista de mártires no GitHub. Essa classe é mantida no no repositório \href{https://github.com/alexishuf/ufsc-thesis-rn46-2019/}{alexishuf/ufsc-thesis-rn46-2019}. Atualizaçãoes podem ser encontradas nesse repositório. \textit{Issues} e PR's são bem vindos.

\subsection{Changelog}

Lista de versões (pelo menos das versões que receberam um número):
\begin{description}
\item[v 0.1-alpha] (\today) Primeiro release para ajudar alunos com pouco prazo de entrega
\end{description}


\section{Quickstart}
\label{sec:quick}

A classe \texttt{ufsc-thesis-rn46-2019} deveria ser encarada como um drop-in para o \abnTeX. Você pode começar a escrever uma tese do zero usando apenas esta classe, mas talvez você queira usar algum template indicado por algum colega. Na maioria dos casos, bastará usar \mt|\documentclass{ufsc-thesis-rn46-2019}|, ajustando o caminho se necessário. Há duas principais formas de incluir essa classe no seu projeto.

\begin{enumerate}
\item Copie o arquivo \texttt{ufsc-thesis-rn46-2019.cls}. Sim, isso funciona pois o logo da UFSC está embutido em base64 dentro do cls. Para que isso funcione, você deve compilar com \texttt{-shell-escape} em um ambiente \textit{UNIX-like}.
\item Copie a pasta do repositório do github para dentro do seu projeto. Nesse caso você deverá adicionar o caminho dessa pasta ao fazer o \mt|\documentclass|. Há 3 formas de incluir essa pasta:
  \begin{enumerate}
  \item Use a opção Download as Zip do Github se você não sabe o que é git.
  \item Via \texttt{git submodule}, se você já  está usando git
  \item Via \texttt{git clone} se não estiver usando git no seu projeto (\textit{shame on you}) ou se estiver usando no Overleaf, onde submodules não funcionam.
  \end{enumerate}
\end{enumerate}

Esse quickstart assume que você está começando do zero, sem um template anterior, com intuíto de ser didático. Se o seu trabalho for escrito em língua inglesa, você deverá passar uma opção \mt|english| para a classe. Caso contrário não precisa passar nenhuma opção. Logo após chamar a classe, você deverá fornecer dados para a classe (e para o \abnTeX). Veja um preâmbulo completo de exemplo na \autoref{fig:preambulo}. Os próximos parágrafos. Segue um rápido overview sobre o singnificado de cada um dos comandos usados (a maior parte deles continua funcionando como no \abnTeX).

\begin{itemize}
\item \mt|\titulo|, \mt|\autor|, \mt|\instituicao|, \mt|\orientador| e  \mt|\coorientador|: Esses comandos continuam com o mesmo significado e uso que possuiam no \abnTeX.
\item \mt|\data|: As regras da UFSC, exigem que apenas o ano esteja presente na capa e folha de rosto. No entanto, a nova folha de certificação, que é gerada por essa classe precisa da data completa. Forneça a data completa \textbf{em português} (mesmo para documentos em inglês). A classe irá extrair o ano.
\item \mt|\programa| e \mt|\centro|: Nome do Programa de Pós graduação, por extenso e nome do centro (e.g., Centro Tecnológico -- CTC)
\item \mt|\tese| (ou \dissertacao): O texto a ser colocado abaixo do título na folha de rosto tem regras bem definidas. Você deve usar um desses dois comandos para indicar o tipo de trabalho (e consequentemente o nível).
\item \mt|\titulode|: Específica qual é o nome do título almejado. De acordo com a BU, o formato deve sempre ser ``Doutor em XXX'' ou ``Mestre em XXX''.
\item \mt|\preambulo|: Esse comando, fornecido pelo \abnTeX é desnecessário nessa classe. Você pode usar ele para sobreescrever o texto gerado automaticamente a partir do uso de \mt|\tese| e \mt|\titulode|
\end{itemize}

A ``folha de certificação'', que substituiu a antiga folha de arovação agora é gerada em \LaTeX. O nome do orientador já foi fornecido anteriormente, resta apenas indicar os membros avaliadores da banca e o coordenador do programa:
\begin{itemize}
\item \mt|\membrobanca{<nome>}{Universidade}|: Adiciona um membro da banca. \textbf{Atenção}: para membros avaliadores, o ``Dr.'' deve ser inserido após o nome e o ``Prof(a).'' deve preceder o nome.
\item \mt|\coordenador| e \mt|\coordenadora|: Configura o nome do(a) coordenador(a) do Programa de Pós Graduação.
\end{itemize}

\begin{figure}[tb]
  \centering
  \caption{Preambulo de uma tese (ou dissertação) típica usando \texttt{ufsc-thesis-rn46-2019}.}
  \label{fig:preambulo}
  \begin{minted}{latex}
\documentclass[english]{ufsc-thesis-rn46-2019/ufsc-thesis-rn46-2019}

% \usepackage's a gosto

\titulo{Template \LaTeX~ seguindo a RN 46/2019/CPG da UFSC}
\autor{Fulano da Silva}
\data{1 de Agosto de 2019}
\instituicao{Universidade Federal de Santa Catarina}
\programa{Programa de Pós-Graduação em Ciências da Computação}
\local{Florianópolis} % Apenas cidade! Sem estado
\tese % ou \dissertacao
\titulode{Doutor em Ciência da Computação}
\orientador{Prof. Dr. Ben Trovato}
\coorientador{Prof. Dr. Lars Thørväld}
\centro{Centro Tecnológico -- CTC}

\membrobanca{Prof. Valerie Béranger, Dr.}{Universidade Federal de Santa Catarina}
\membrobanca{Prof. Mordecai Malignatus, Dr.}{Universidade Federal de Santa Catarina}
\membrobanca{Prof. Huifen Chan, Dr.}{Universidade Federal de Santa Catarina}
\coordenador{Prof. Dr. Charles Palmer, Dr.}
  \end{minted}
  \captionsource{o autor.}
\end{figure}

Os elementos pré-textuais permanecem em grande parte tendo seu comportamento determinado pelo \abnTeX. Alguns elementos, incuídos nesse guia foram alterados para satisfazer normas da UFSC. Esses elementos pré-textuais, também presentes nesse guia são obtidos com o código mostrado na \autoref{fig:pre}. Capa (\mt|\imprimircapa|), folha de rosto (\mt|\imprimirfolhaderosto*|) listas (e.g., \mt|\listoffigures*|) e sumários \mt|\tableofcontents*| são obtids através dos mesmos comandos do \abnTeX, mas agora respeitam novas regras impostas pela BU. 

A ficha catalográfica deve ser gerada em sistema próprio da BU, que produz um PDF. Esse PDF deve ser salvo no seu projeto e incluído no documento. A macro \mt|\incluirfichacatalografica{<pdf>}| faz essa inclusão usando o pacote \href{https://www.ctan.org/pkg/pdfpages}{\mt|pdfpages|}. O \mt|\protect| é necessário para evitar um bug (uma linha em branco substitui o \mt|\protect|). A folha de certificação será gerada pelo comando \mt|\imprimirfolhadecertificacao| de acordo (e na ordem) com os comandos de dados emitidos anteriormente.

\begin{figure}[tb]
  \centering
  \caption{Elementos pré-textuais.}
  \label{fig:pre}
  \begin{minted}{latex}
\pretextual%
\imprimircapa%|*
\protect\incluirfichacatalografica{ficha.pdf}
\cleardoublepage \imprimirfolhadecertificacao
\cleardouplepage \listoffigures*
\cleardoublepage \tableofcontents*
  \end{minted}
  \captionsource{o autor.}
\end{figure}

Antes de iniciar o primeiro capítulo é necessário chamar a macro \mt|\textual|, como em todo documento \abnTeX. Após os elementos textuais, os pós-textuais devem ser precedidos por um \mt|\postextual|. 

Para fazer uso da bibliografia, basta fazer como mostra a \autoref{fig:pos}. A classe já inclui o \texttt{abntex2cite} e o configura. A UFSC impôs poucas alterações no tratamento de bibliografia. Para evitar o carregamento automático do \texttt{abntex2cite}, forneça a opção \mt|noabntexcite| no \mt|\documentclass|.

\begin{figure}[tb]
  \centering
  \caption{Elementos pós-textuais.}
  \label{fig:pos}
  \begin{minted}{latex}
\postextual
\bibliography{example}
  \end{minted}
  \captionsource{o autor.}
\end{figure}


\chapter{Exemplos de formatação}
\label{ch:ex}

Essa frase é verdadeira pois tem um \mt|\cite| no final \cite{turing1937}. Essa é mais verdadeira ainda pois tem um (\mt|\cite{turing1937,dijkstra1968}|) no final \cite{turing1937,dijkstra1968}. Já esta frase inofensiva usa \mt|\citeonline{dijkstra1968}| para citar \citeonline{dijkstra1968} nominalmente. Essa outra frase cita o trabalho que \citeonline{golub1992} escreveu com outros 9 autores.

A lista abaixo mostra o efeito de \mt|\autoref{}| com capítulos e (sub)seções.

\begin{itemize}
\item \autoref{ch:ex}
\item \autoref{sec:stuff}
\item \autoref{sec:more}
\item \autoref{sec:yet-more}
\end{itemize}

Atenção! O template da BU deixa figuras e tabelas alinhadas à esquerda. No entanto, o tutorial de Word disponibilizado pela BU diz que Legendas e captions devem respeitar o ``alinhamento da ilustração'' (e apresenta uma ilustração alinhada a esquerda). O tutorial explicando a ABNT mostra uma figura centralizada com legendas alinhadas a esquerda e com recuo até o começo da figura. O autor do .cls se exime de qualquer culpa. Alinhe aqui (com \mt|\centering|, \mt|\flushright| ou \mt|\flushleft|) como mandar o seu coração.

A \autoref{fig:figura} é uma figura de exemplo. Para gerar o ``Fonte:'' (que aparece como ``Source:'' na versão inglês') foi usada o comando \mt|\captionsource{o autor}|. Essa macro, \mt|\captionsource| foi introduzida pela classe \texttt{ufsc-thesis-rn46-2019}.

\begin{figure}[t]
  \centering
  \caption{\footnotesize A caption text.}
  \label{fig:figura}
  %\lipsum[1]

  \includegraphics[width=.5\linewidth]{ufsc.pdf}
  \captionsource{The author.}
\end{figure}

\section{Coisas}
\label{sec:stuff}
Imagine alguma afirmação de alto valor científico aqui.

\subsection{Outras coisas}
\label{sec:more}
Olá! Eu vim do passado para te avisar que o texto de uma dissertação deve ser impessoal e você não deveria tentar conversar com o leitor. 

\subsubsection{Outras coisas mais}
\label{sec:yet-more}
Estudos demonstram que essa afirmação é falsa.

\subsubsubsection{Ainda outras coisas mais}
\label{sec:yet-another}
Fazer a grama verde, como? Novamente o jogo foi perdido. Opcionalmente, tudo pode ser opcional. Recursos foram gastos com isso. Descubra a verdade nas capitalizadas.
% Fiquei 15 minutos mais próximo da morte ao escrever isso. Você pode chegar ainda mais perto se tentar entender.


\chapter{Referência de opções e macros}
\label{ch:ref}

\section{Opções da classe}

A classe possui apenas duas opções que fornecem uma feature (são as dusa primeiras). Todas as demais servem para desativar comportamentos \textit{default}.

\paragraph*{\texttt{english} \\
            \texttt{brazil}}
Prepara o \abnTeX e a classe para que o corpo do documento esteja em inglês (ou português). Alguns elementos em português, especialmente os relacionados a BU e a UFSC permanecem em português.

\paragraph*{\texttt{embeddlogo}} Se ativa, essa opção desempacota o ufsc.pdf diretamente de um base64 dentro do arquivo \texttt{.cls}. Isso permite que o \texttt{.cls} seja uma arquivo auto-contido. Pessoas avessas a \texttt{git submodule} e a diretórios podem simplesmente levar o .cls de um projeto para outro. Há uma desvantagem (e por isso essa opção não é default): É necessário compilar com a opção \texttt{-shell-escape} em uma ambiente \texttt{UNIX-like}.

\paragraph*{\texttt{times}, \texttt{lmodern} e \texttt{arial}} Escolhe a fonte do documento. O padrão é \texttt{times}. No caso das escolhas \texttt{times} e \texttt{arial} são usados clones open-source (sem limitações legais à redistribuição) que podem ser encontradas em qualquer instalação \LaTeX. A opção \texttt{lmodern} corresponde a fonte Latin Modern, a fonte padrão do \LaTeX. Essa é uma fonte serifada similar à Times, mas melhor. No entanto, ela não possui respaldo oficial da BU.

\paragraph*{\texttt{nocapautoref}} Essa classe configura o comando \mt{\autoref} para que nomes de capitulos e seções sejam capitalizados. Ao fornecer essa opção essa alteração deixará de ser feita.

\paragraph*{\texttt{noabntexcite}} Essa classe incui o pacote \texttt{abntex2cite} e o configura automaticamente. Caso você deseja fazer essa inclusão manualmente para fazer sua própria configuração, use essa opção para que a classe não carregue o pacote.

\paragraph*{\texttt{nohidelinks}} O \href{https://ctan.org/pkg/hyperref}{\texttt{hyperref}} por padrão desenha bordas coloridas ao redor de \textit{hyperlinks}. Por padrão a classe desativa esse comportamente passando a opção \texttt{hidelinks} ao \texttt{hyperref}. Ao ativar essa opção o \texttt{hyperref} voltará ao seu próprio comportamento \textit{default}.

\paragraph*{\texttt{nocleaheader}} O \abnTeX gera headers que incluem o tírulo da seção. Essa classe suprime esses headers pois eles não existem no template da BU. Ao passar essa opção o header padrão do \abnTeX será restaurado.

\paragraph*{\texttt{*}}  Quaisquer outras opções não listadas anteriormente são repassadas à classe \abnTeX sem manipulação.

\section{Novas macros}

Essa seção apresenta macros novas, não presentes no \abnTeX ou \texttt{abntex2cite}.

\subsection{Comandos de dados}
\label{sec:dados}

Esses comandos visam fornecer dados que são posteriormente usados pelos comandos de saída discutidos na próxima seção. \textbf{Importante:} Não esqueça de preencher os comandos de dados do próprio \abnTeX, como mostrado na \autoref{ch:quick}.

\paragraph*{\texttt{\textbackslash{}programa\{<nome>\}}} Configura o nome do Programa de Pós-Graduação. 

\paragraph*{\texttt{\textbackslash{}titulode\{<texto>\}}} Define o Título alvo. O título \textit{deve ser escrito incluindo a especialidade}. Por exemplo: \texttt{Mestre em Ciência da Computação}

\paragraph*{\texttt{\textbackslash{}tese}} Comando sem argumentos. Marca o documento como uma tese. Isso irá alterar o preambulo e a folha de certificação.

\paragraph*{\texttt{\textbackslash{}dissertacao}} Comando sem argumentos. Marca o documento como uma dissertação de mestrado. Esse é o padrão quando nem \mt|\dissertacao| nem \mt|\tese| são usados.

\paragraph*{\texttt{\textbackslash{}nivel\{<nivel>\}}} Deve ser o nível do título almejado, em minúsculas. O valor padrão é inferido a partir do uso (ou não uso) de \mt|\tese| e \mt|\dissertacao|

\paragraph*{\texttt{\textbackslash{}centro\{<texto>\}}} Centro da UFSC onde está sediado o Programa de Pós Graduação.

\paragraph*{\texttt{\textbackslash{}data\{<data por extenso>\}}} 
Define a data a ser usada na folha de certificação. O ano dessa data será usado na capa e na folha de rosto. Se esse comando for omitido, a data atual do sistemaa será utilizada. Não utilize \mt|\today| como argumento em documentos em inglês. Isso fará com que a data da folha de aprovação (que é em português) apareça em inglês!
Exemplo: \mt|\data{1 de Agosto de 2019}|

\paragraph*{\texttt{\textbackslash{}ano\{<ano>\}}\\  
            \texttt{\textbackslash{}mes\{<nome do mes>\}} \\
            \texttt{\textbackslash{}dia\{<dia>\}}} 
Define cada componente da data individualmente.


\paragraph*{\texttt{\textbackslash{}membrobanca\{<nome com títulos>\}\{<universidade por extenso>\}}} 
Nome do professor avaliador da banca, incluídndo Prof. (ou Profa.) antes do nome e o título \textbf{após} o nome. Exemplo: \texttt{Prof. Mordecai Malignatus, Dr.}. O orientador não deve ser incluído nessa seção. Não está claro nas instruções da UFSC se o coorientador também não deveria. Note esse é o único lugar onde o título deve vir após o nome. Para orientador e Coordenador a BU coloca o título antes.

\paragraph*{\texttt{\textbackslash{}coordenador[a]\{<nome>\}} \\
            \texttt{\textbackslash{}coordenadora\{<nome>\}}} 
Nome do Coordenador do programa. No caso de coordenadora, pode ser adicionado o argumento opcional \texttt{[a]} ou pode ser usado o comando \mt|\coordenadora|. Nesse caso a BU usa títulos antes do nome. Exemplo: \mt|\coordenador{Prof. Dr. Mordecai Malignatus}|.


\subsection{Comandos de saída}

Esses comandos produzem resultados visíveis. Devem ser usados dentro do ambiente \texttt{document}.

\paragraph*{\texttt{\textbackslash{}captionsource\{<texto>\}}} Insere o Fonte: <texto> que deve estar presente abaixo de Figuras, Tabelas e quaisquer outros Floats. Esse comando não altera o alinhamento (veja a \autoref{sec:quick}).

\paragraph*{\texttt{\textbackslash{}incluirfichacatalografica\{<ficha.pdf>\}}}
Inclui a ficha catalográfica no arquivo ficha.pdf que foi gerada no \url{http://ficha.bu.ufsc.br/}.

\paragraph*{\texttt{\textbackslash{}imprimirfolhadecertificacao}}
Imprime a folha de certificação, que subtitui a antiga folha de aprovação. Nessa colha os membros da banca serão listados na ordem em que foram adicionados com o comando \mt|\membrobanca{<nome>}{<universidade>}|.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Elementos pós-textuais                                       %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\postextual
\bibliography{userguide}

\end{document}
